package main

import (
	"github.com/andevery/autogram"
	"log"
	"time"
)

func main() {

	// client := instax.NewClient("2079178474.1fb234f.682a311e35334df3842ccb654516baf5", "5ac3e50811cc47c2a4cd1adda782eb4b")
	// client.Delayer = func() time.Duration {
	// 	return time.Duration(rand.Intn(6000)+3000) * time.Millisecond
	// }

	// wc := instaw.NewClient()
	// wc.CSRFToken = "266af59ac6d8c0264be518bdc4698c27"
	// wc.Cookie = "mid=VIt-JAAEAAHTEAi2AXlL5hZkgvsG; ccode=RU; __utma=1.1078183635.1418427941.1432656376.1432978292.12; __utmc=1; __utmz=1.1432978292.12.2.utmcsr=t.co|utmccn=(referral)|utmcmd=referral|utmcct=/5dO7uc7mS5; sessionid=IGSCe84a66309f4b2a287b345751eff47bd0aa53f2be00fcd01e5255a64638bc4700%3Au7ZylXudt19daJSGmGJdHYiZ71nLy6s3%3A%7B%22_token_ver%22%3A1%2C%22_auth_user_id%22%3A2079178474%2C%22_token%22%3A%222079178474%3AwPP6KLe7p1XSclhb7wo7XcnFvbGhI8kI%3A5d9aa876c0335e031a4dcff2e9b054947fe23a6859d4c32a7b90a54d4acc7eb0%22%2C%22_auth_user_backend%22%3A%22accounts.backends.CaseInsensitiveModelBackend%22%2C%22last_refreshed%22%3A1441426810.129611%2C%22_platform%22%3A4%7D; ig_pr=1; ig_vw=1440; csrftoken=266af59ac6d8c0264be518bdc4698c27; ds_user_id=2079178474"
	// wc.Delayer = func() time.Duration {
	// 	return time.Duration(rand.Intn(10000)+5000) * time.Millisecond
	// }

	// liker := NewLiker([]string{"деньгорода"}, client, wc)
	// liker.Start()

	// api := instax.NewClient("2079178474.1fb234f.682a311e35334df3842ccb654516baf5")
	// web, err := instaw.NewClient("andy_odds", "Dont_Panic1")
	// if err != nil {
	// 	log.Fatal(err)
	// }

	// l := autogram.DefaultLimiter(api, web)

	// fp, err := autogram.NewProvider(autogram.MEDIA, []string{"188535934"}, l)
	// if err != nil {
	// 	log.Fatal(err)
	// }

	// lp, err := autogram.EmptyProvider(l)
	// if err != nil {
	// 	log.Fatal(err)
	// }

	// liker := autogram.DefaultLiker(lp)
	// follower := autogram.DefaultFollower(fp, liker)

	// us, err := apiClient.Likes("1063050685134653313")
	// if err != nil {
	// 	log.Fatal(err)
	// }

	// go follower.Start()
	// for {
	// 	log.Printf("Likes: %v\tFollows: %v\n", liker.Provider.TotalAmount(), follower.Provider.TotalAmount())
	// 	time.Sleep(30 * time.Second)
	// }
	e := []string{"2076878670", "1962558005", "17532394", "12244981", "2189304041", "2125374796", "1829384253", "25025320", "283175195", "1701687817", "332801803", "1491096529", "1453865744", "441458292", "1645585522", "1662401907", "1965694014", "2020605053", "2097317122", "2119426802", "2101798417", "2056133869", "2016991080", "1997415592", "2121600364", "2027566348", "2017655328", "2015328167", "2083000688", "2090926031", "2121492892", "2056002792", "2127864176", "2032766546", "2082918389", "2108955078", "2090346279", "2078717701", "2100166429", "2072094967", "2160954240", "2139469200", "2140824055", "2068695640", "2115299015", "2119301477", "2100569742", "2159879985", "2134244166", "2105810926", "2127675393", "2074563111", "2136732852", "2148626237", "2096268456", "2085157129", "2166610745", "2062861830", "2085352767", "2163881923", "2085886495", "2129559984", "2119282201", "2175832832", "2130889966", "2049017664", "2069630044", "2159369577", "2120525689", "2090943335", "2134629803", "2104710302", "2104134683", "2172970100", "2172868260", "2142453214", "2105385367", "2035684740", "2065727623", "2157602346", "2051287045", "2079267664", "2068041312", "2133307452", "2112129121", "2190206574", "2018080615", "2111647085", "2095887732", "2102083763", "2080328345", "2106233446", "2133246327", "2090922481", "2063727123", "2088205655", "2114951636", "2025662244", "1957412135", "2007154907", "2101392580", "2027311097", "2029648920", "2076581404", "2126541541", "2085682543", "2094293582", "2066873604", "2074405175", "2109326256", "2073413545", "2060415856", "2112198180", "2083080455", "2194421058", "2133783473", "2116876488", "2030709857", "2089819100", "2100519315", "2022465926", "2044887427", "2012134002", "2123565032", "2144244004", "2119375355", "2178051967", "2109437967", "2075612537", "2114276056", "2106577758", "2083644761", "1520133970", "1925137863", "1530811628", "1383502393", "1545521111", "1491152254", "1367340818", "1397841425", "1539373694", "1528627704", "2061846652", "1213212642", "1666582563", "1720608331", "1682216539", "1664392891", "1776608719", "1816466937", "1994430617", "1777495176", "1838039441", "1798939763", "1940098443", "1818183836", "1930512107", "1826097529", "1796241411", "1788574034", "1907226175", "1984961333", "2115323126", "1994076087", "1769649120", "1778159417", "1942175026", "1790835779", "1936961206", "1786733292", "1949353272", "2065298115", "2006045613", "2084899448", "2118954503", "1816168368", "1807459550", "1957613858", "1912260385", "2123877885", "2042132420", "2022909556", "2023628287", "1782755130", "2129325861", "1828675740", "2058067568", "2132359777", "2021956241", "2098231964", "2114772362", "2126430480", "2175569659", "2127880382", "2087243845", "1998405407", "2027795690", "2092872307", "1701841507", "1791449710", "2035429724", "2014331864", "2148314308", "2109636706", "1531284377", "1553355211", "1707251726", "1520894472", "1982231389", "2034630891", "1956322108", "1965723079", "2047657327", "1980489833", "2075247659", "2021881812", "2074192853", "2080552315", "2094949709", "2131297549", "1994969108", "1562150292", "2134417168", "2166133918", "2153749439", "2176705751", "2103013350", "1983039733", "337537", "1519251084", "824205694", "1525112972", "1396515848", "2136196410", "419233047", "2054756536", "2071652455", "2039336124", "2197609626", "2133653524", "2155979997", "223016253", "2042866357", "262437644", "1629123546", "1342247343", "1820515124", "375789493", "630498727", "1093741", "206251620", "1936632186", "1317152309", "362546131", "1982717351", "1289032329", "1940692863", "1565044610", "2077093056", "307961729", "12199780", "257055308", "248284400", "2115543063", "2128902753", "272977656", "437646450", "2034357323", "2092750197", "1824498312", "2123926421", "270340716", "207124094", "1781285565", "1802250221", "1987228175", "228339366", "1959917239", "2016691246", "2031040482", "395179995", "2015742404", "2044359113"}

	c, err := autogram.DefaultClient("andy_odds", "Dont_Panic1", "2079178474.1fb234f.682a311e35334df3842ccb654516baf5")
	if err != nil {
		log.Fatal(err)
	}
	w1 := autogram.DefaultTagsWorker(c, []string{"cityscape", "animallovers", "architecture", "кругсвета"})
	w2 := autogram.NewUnfollowWorker(c, e)
	w1.Start()
	// w2.Start()
	t := time.Now()
	for {
		log.Printf("Left: %v, Likes: %v\tFollows: %v\tUnfollow: %v\n", time.Since(t), w1.LikesCount(), w1.FollowsCount(), w2.Count())
		time.Sleep(30 * time.Second)
	}
}
